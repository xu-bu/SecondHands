{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?ee8a","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?e60c","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?1b04","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?132e","uni-app:///pages/tabbar/goods/goods.vue","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?0a94","webpack:///C:/Users/64170/Documents/HBuilderProjects/vue2/pages/tabbar/goods/goods.vue?6647"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","data","collection","field","formData","waterfall","status","tipShow","onLoad","token","tokenExpired","uni","db","onShow","methods","select","load","onPullDownRefresh","clear","clearTimeout","onReachBottom"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC+K;AAC/K,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,0VAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAA8pB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCsElrB;EACAC;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACAC;QACAC;QAAA;QACAC;MACA;;MACAC;IACA;EACA;EACAC;IACA;IAEA,4BAGA;MAAA,IAFAC;QACAC;MAEAC;MACAA;IACA;IACA;IACAC;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;EAAA,CACA;EACAC;IACA;AACA;AACA;IACAC;MACA;IACA;IAEAC;MACA;QACA;MACA;IACA;EACA;EACA;AACA;AACA;EACAC;IAAA;IACA;IACA;MACAC;IACA;MACA;MACAC;MACA;QACA;MACA;MACAR;IACA;EACA;EACA;AACA;AACA;EACAS;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7IA;AAAA;AAAA;AAAA;AAAyvC,CAAgB,8lCAAG,EAAC,C;;;;;;;;;;;ACA7wC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/tabbar/goods/goods.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/tabbar/goods/goods.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods.vue?vue&type=template&id=695df536&\"\nvar renderjs\nimport script from \"./goods.vue?vue&type=script&lang=js&\"\nexport * from \"./goods.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/tabbar/goods/goods.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=template&id=695df536&\"","var components\ntry {\n  components = {\n    uniSection: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-section/uni-section\" */ \"@/components/uni-section/uni-section.vue\"\n      )\n    },\n    unicloudDb: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/@dcloudio/uni-cli-shared/components/unicloud-db\" */ \"@dcloudio/uni-cli-shared/components/unicloud-db.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniListItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-item/uni-list-item\" */ \"@/uni_modules/uni-list/components/uni-list-item/uni-list-item.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=script&lang=js&\"","<template>\n    <!--\n    本页面模板教程：https://ext.dcloud.net.cn/plugin?id=2651\n    uni-list 文档：https://ext.dcloud.net.cn/plugin?id=24\n    uniCloud 文档：https://uniapp.dcloud.io/uniCloud/README\n    unicloud-db 组件文档：https://uniapp.dcloud.io/uniCloud/unicloud-db\n    DB Schema 规范：https://uniapp.dcloud.net.cn/uniCloud/schema\n     -->\n        <view class=\"list\">\n            <!-- 刷新页面后的顶部提示框 -->\n            <!-- 当前弹出内容没有实际逻辑 ，可根据当前业务修改弹出提示 -->\n            <view class=\"tips\" :class=\"{ 'tips-ani': tipShow }\">更新了！</view>\n            <!-- 页面分类标题 -->\n            <uni-section title=\"二手好物\" type=\"line\"><button class=\"button-box\" @click=\"select\">切换视图</button></uni-section>\n    \n            <unicloud-db ref=\"udb\" v-slot:default=\"{data, loading, error, options}\" :options=\"formData\"\n                :collection=\"collection\" :field=\"field\" @load=\"load\">\n                <!-- 基于 uni-list 的页面布局 -->\n                <uni-list :class=\"{ 'uni-list--waterfall': options.waterfall }\">\n                    <!-- 通过 uni-list--waterfall 类决定页面布局方向 -->\n                    <!-- to 属性携带参数跳转详情页面，当前只为参考 -->\n                    <uni-list-item :border=\"!options.waterfall\" class=\"uni-list-item--waterfall\" title=\"自定义商品列表\"\n                        v-for=\"item in data\" :key=\"item._id\"\n                        :to=\"'/pages/detail/detail?id='+item._id+'&title='+item.name\">\n                        <!-- 通过header插槽定义列表左侧图片 -->\n                        <template v-slot:header>\n                            <view class=\"uni-thumb shop-picture\" :class=\"{ 'shop-picture-column': options.waterfall }\">\n                                <image :src=\"item.goods_thumb\" mode=\"aspectFill\"></image>\n                            </view>\n                        </template>\n                        <template v-slot:body>\n                            <view class=\"shop\">\n                                <view>\n                                    <view class=\"uni-title\">\n                                        <text class=\"uni-ellipsis-2\">{{ item.name }}</text>\n                                    </view>\n                                    <!-- <view> -->\n                                    <!-- 对应数据库的goods_tip 红色标签 -->\n                                    <text class=\"uni-tag hot-tag\">{{ item.goods_tip }}</text>\n                                    <!-- 对应数据库的keywords 灰色标签-->\n                                    <!-- <text v-for=\"tag in item.tag\" :key=\"tag\" class=\"uni-tag\">{{ tag }}</text> -->\n                                    <!-- </view> -->\n                                </view>\n                                <view>\n                                    <view class=\"shop-price\">\n                                        <text>¥</text>\n                                        <text class=\"shop-price-text\">{{ item.goods_price }}</text>\n                                        <text>.00</text>\n                                    </view>\n                                    <!-- 评论，销量，店名 -->\n                                    <!-- <view class=\"uni-note\">{{ item.comment_count }}条评论 月销量 {{ item.month_sell_count }}</view>\n                                <view class=\"uni-note ellipsis\">\n                                    <text class=\"uni-ellipsis-1\">{{ item.shop_name }}</text>\n                                    <text class=\"uni-link\">进店 ></text>\n                                </view> -->\n                                </view>\n                            </view>\n                        </template>\n                        <!-- 通过body插槽定义商品布局 -->\n    \n                    </uni-list-item>\n                </uni-list>\n                <!-- 通过 loadMore 组件实现上拉加载效果，如需自定义显示内容，可参考：https://ext.dcloud.net.cn/plugin?id=29 -->\n                <uni-load-more v-if=\"loading || options.status === 'noMore' \" :status=\"options.status\" />\n            </unicloud-db>\n        </view>\n    \n</template>\n\n<script>\n    export default {\n        components: {},\n        data() {\n            return {\n                // 数据表名\n                collection: 'opendb-mall-goods',\n                // 查询字段，多个字段用 , 分割\n                field: 'goods_thumb,name,goods_tip,tag,goods_price,comment_count,month_sell_count,shop_name',\n                formData: {\n                    waterfall: false, // 布局方向切换\n                    status: 'loading', // 加载状态\n                },\n                tipShow: false // 是否显示顶部提示框\n            };\n        },\n        onLoad() {\r\n\t\t\tconst db = uniCloud.database()\r\n\t\t\t\r\n\t\t\tfunction refreshToken({\r\n\t\t\t  token,\r\n\t\t\t  tokenExpired\r\n\t\t\t}) {\r\n\t\t\t  uni.setStorageSync('uni_id_token', token)\r\n\t\t\t  uni.setStorageSync('uni_id_token_expired', tokenExpired)\r\n\t\t\t}\r\n\t\t\t// 绑定刷新token事件\r\n\t\t\tdb.on('refreshToken', refreshToken)\r\n\t\t},\n        onShow() {\n            // let pages = getCurrentPages();\n            // let page = pages[pages.length - 1];\n            // uni.redirectTo({\n            //  url: page.$page.fullPath\n            // });\n        },\n        methods: {\n            /**\n             * 切换商品列表布局方向\n             */\n            select() {\n                this.formData.waterfall = !this.formData.waterfall;\n            },\n\n            load(data, ended) {\n                if (ended) {\n                    this.formData.status = 'noMore'\n                }\n            }\n        },\n        /**\n         * 下拉刷新回调函数\n         */\n        onPullDownRefresh() {\n            this.formData.status = 'more'\n            this.$refs.udb.loadData({\n                clear: true\n            }, () => {\n                this.tipShow = true\n                clearTimeout(this.timer)\n                this.timer = setTimeout(() => {\n                    this.tipShow = false\n                }, 1000)\n                uni.stopPullDownRefresh()\n            })\n        },\n        /**\n         * 上拉加载回调函数\n         */\n        onReachBottom() {\n            this.$refs.udb.loadMore()\n        },\n    };\n</script>\n\n<style lang=\"scss\">\n    @import '../../../common/uni-ui.scss';\n\n    page {\n        display: flex;\n        flex-direction: column;\n        box-sizing: border-box;\n        background-color: #efeff4;\n        min-height: 100%;\n        height: auto;\n    }\n\n    .tips {\n        color: #67c23a;\n        font-size: 14px;\n        line-height: 40px;\n        text-align: center;\n        background-color: #f0f9eb;\n        height: 0;\n        opacity: 0;\n        transform: translateY(-100%);\n        transition: all 0.3s;\n    }\n\n    .tips-ani {\n        transform: translateY(0);\n        height: 40px;\n        opacity: 1;\n    }\n\n    .shop {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n    }\n\n    .shop-picture {\n        width: 110px;\n        height: 110px;\n    }\n\n    .shop-picture-column {\n        width: 100%;\n        height: 170px;\n        margin-bottom: 10px;\n    }\n\n    .shop-price {\n        margin-top: 5px;\n        font-size: 12px;\n        color: #ff5a5f;\n    }\n\n    .shop-price-text {\n        font-size: 16px;\n    }\n\n    .hot-tag {\n        background: #ff5a5f;\n        border: none;\n        color: #fff;\n    }\n\n    .button-box {\n        height: 30px;\n        line-height: 30px;\n        font-size: 12px;\n        background: #007AFF;\n        color: #fff;\n    }\n\n    .uni-link {\n        flex-shrink: 0;\n    }\n\n    .ellipsis {\n        display: flex;\n        overflow: hidden;\n    }\n\n    .uni-ellipsis-1 {\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n\n    .uni-ellipsis-2 {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n    }\n\n\n    // 默认加入 scoped ，所以外面加一层提升权重\n    .list {\n        .uni-list--waterfall {\n\n            /* #ifndef H5 || APP-VUE */\n            // 小程序 编译后会多一层标签，而其他平台没有，所以需要特殊处理一下\n            /deep/ .uni-list {\n                /* #endif */\n                display: flex;\n                flex-direction: row;\n                flex-wrap: wrap;\n                padding: 5px;\n                box-sizing: border-box;\n\n                /* #ifdef H5 || APP-VUE */\n                // h5 和 app-vue 使用深度选择器，因为默认使用了 scoped ，所以样式会无法穿透\n                /deep/\n                /* #endif */\n                .uni-list-item--waterfall {\n                    width: 50%;\n                    box-sizing: border-box;\n\n                    .uni-list-item__container {\n                        padding: 5px;\n                        flex-direction: column;\n                    }\n                }\n\n                /* #ifndef H5 || APP-VUE */\n            }\n\n            /* #endif */\n        }\n    }\n</style>\n","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1684850780591\n      var cssReload = require(\"C:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}